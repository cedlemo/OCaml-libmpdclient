<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Music_database (libmpdclient.Mpd.Music_database)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">libmpdclient</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Mpd.Music_database</span></h1></header><p>Music_database module: regroups data base related commands.</p><div class="spec type" id="type-tags"><a href="#type-tags" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>tags</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-tags.Unknown" class="anchored"><td class="def constructor"><a href="#type-tags.Unknown" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Unknown</span></code></td></tr><tr id="type-tags.Artist" class="anchored"><td class="def constructor"><a href="#type-tags.Artist" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Artist</span></code></td></tr><tr id="type-tags.Album" class="anchored"><td class="def constructor"><a href="#type-tags.Album" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Album</span></code></td></tr><tr id="type-tags.Album_artist" class="anchored"><td class="def constructor"><a href="#type-tags.Album_artist" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Album_artist</span></code></td></tr><tr id="type-tags.Title" class="anchored"><td class="def constructor"><a href="#type-tags.Title" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Title</span></code></td></tr><tr id="type-tags.Track" class="anchored"><td class="def constructor"><a href="#type-tags.Track" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Track</span></code></td></tr><tr id="type-tags.Name" class="anchored"><td class="def constructor"><a href="#type-tags.Name" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Name</span></code></td></tr><tr id="type-tags.Genre" class="anchored"><td class="def constructor"><a href="#type-tags.Genre" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Genre</span></code></td></tr><tr id="type-tags.Date" class="anchored"><td class="def constructor"><a href="#type-tags.Date" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Date</span></code></td></tr><tr id="type-tags.Composer" class="anchored"><td class="def constructor"><a href="#type-tags.Composer" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Composer</span></code></td></tr><tr id="type-tags.Performer" class="anchored"><td class="def constructor"><a href="#type-tags.Performer" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Performer</span></code></td></tr><tr id="type-tags.Comment" class="anchored"><td class="def constructor"><a href="#type-tags.Comment" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Comment</span></code></td></tr><tr id="type-tags.Disc" class="anchored"><td class="def constructor"><a href="#type-tags.Disc" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Disc</span></code></td></tr><tr id="type-tags.Musicbrainz_artistid" class="anchored"><td class="def constructor"><a href="#type-tags.Musicbrainz_artistid" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Musicbrainz_artistid</span></code></td></tr><tr id="type-tags.Musicbrainz_albumid" class="anchored"><td class="def constructor"><a href="#type-tags.Musicbrainz_albumid" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Musicbrainz_albumid</span></code></td></tr><tr id="type-tags.Musicbrainz_albumartistid" class="anchored"><td class="def constructor"><a href="#type-tags.Musicbrainz_albumartistid" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Musicbrainz_albumartistid</span></code></td></tr><tr id="type-tags.Musicbrainz_trackid" class="anchored"><td class="def constructor"><a href="#type-tags.Musicbrainz_trackid" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Musicbrainz_trackid</span></code></td></tr><tr id="type-tags.Musicbrainz_releasetrackid" class="anchored"><td class="def constructor"><a href="#type-tags.Musicbrainz_releasetrackid" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Musicbrainz_releasetrackid</span></code></td></tr><tr id="type-tags.Original_date" class="anchored"><td class="def constructor"><a href="#type-tags.Original_date" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Original_date</span></code></td></tr><tr id="type-tags.Artist_sort" class="anchored"><td class="def constructor"><a href="#type-tags.Artist_sort" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Artist_sort</span></code></td></tr><tr id="type-tags.Album_artist_sort" class="anchored"><td class="def constructor"><a href="#type-tags.Album_artist_sort" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Album_artist_sort</span></code></td></tr><tr id="type-tags.Album_sort" class="anchored"><td class="def constructor"><a href="#type-tags.Album_sort" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Album_sort</span></code></td></tr><tr id="type-tags.Count" class="anchored"><td class="def constructor"><a href="#type-tags.Count" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Count</span></code></td><td class="doc"><p>(** type for the Mpd database tags for find command. *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-tag_to_string"><a href="#val-tag_to_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tag_to_string : <a href="index.html#type-tags">tags</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Transform get the string representation of a tag.</p></div></div><div class="spec type" id="type-search_tags"><a href="#type-search_tags" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>search_tags</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-search_tags.Any" class="anchored"><td class="def constructor"><a href="#type-search_tags.Any" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Any</span></code></td></tr><tr id="type-search_tags.File" class="anchored"><td class="def constructor"><a href="#type-search_tags.File" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">File</span></code></td></tr><tr id="type-search_tags.Base" class="anchored"><td class="def constructor"><a href="#type-search_tags.Base" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Base</span></code></td></tr><tr id="type-search_tags.Modified_since" class="anchored"><td class="def constructor"><a href="#type-search_tags.Modified_since" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Modified_since</span></code></td></tr><tr id="type-search_tags.Mpd_tag" class="anchored"><td class="def constructor"><a href="#type-search_tags.Mpd_tag" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Mpd_tag</span><span class="keyword"> of </span><a href="index.html#type-tags">tags</a></code></td><td class="doc"><p>(** type for the supplementary tags for the search commands. *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-search_tag_to_string"><a href="#val-search_tag_to_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>search_tag_to_string : <a href="index.html#type-search_tags">search_tags</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Get the string representation of a search_tag.</p></div></div><div class="spec val" id="val-find"><a href="#val-find" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>find : <a href="../Client/index.html#type-t">Client.t</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-search_tags">search_tags</a><span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> ?&#8288;sort:<a href="index.html#type-tags">tags</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;window:(int<span class="keyword"> * </span>int) <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> (<a href="../Song/index.html#type-t">Song.t</a> list, <a href="../Protocol/index.html#type-ack_error">Protocol.ack_error</a><span class="keyword"> * </span>int<span class="keyword"> * </span>string<span class="keyword"> * </span>string) Stdlib.result</code></div><div class="doc"><p>Find songs in the db that match exactly the a list of pairs (tag, exact_pattern). The
exact_pattern is a string and the tah can be any tag supported by MPD, or
one of the special parameters:
</p><ul><li>any checks all tag values</li><li>file checks the full path (relative to the music directory)</li><li>base restricts the search to songs in the given directory (also relative to the music directory)</li><li>modified-since compares the file's time stamp with the given value (ISO 8601 or UNIX time stamp)</li></ul></div></div><div class="spec val" id="val-findadd"><a href="#val-findadd" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>findadd : <a href="../Client/index.html#type-t">Client.t</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-search_tags">search_tags</a><span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> <a href="../Protocol/index.html#type-response">Protocol.response</a></code></div><div class="doc"><p>Find songs in the db that and adds them to current playlist. Parameters
have the same meaning as for find.</p></div></div><div class="spec val" id="val-search"><a href="#val-search" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>search : <a href="../Client/index.html#type-t">Client.t</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-search_tags">search_tags</a><span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> ?&#8288;sort:<a href="index.html#type-tags">tags</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;window:(int<span class="keyword"> * </span>int) <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> (<a href="../Song/index.html#type-t">Song.t</a> list, <a href="../Protocol/index.html#type-ack_error">Protocol.ack_error</a><span class="keyword"> * </span>int<span class="keyword"> * </span>string<span class="keyword"> * </span>string) Stdlib.result</code></div><div class="doc"><p>Search for any song that contains WHAT. Parameters have the same meaning
as for find, except that search is not case sensitive.</p></div></div><div class="spec val" id="val-searchadd"><a href="#val-searchadd" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>searchadd : <a href="../Client/index.html#type-t">Client.t</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-search_tags">search_tags</a><span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> <a href="../Protocol/index.html#type-response">Protocol.response</a></code></div><div class="doc"><p>Search for any song that contains WHAT in tag TYPE and adds them to
current playlist.
Parameters have the same meaning as for findadd, except that search is not
case sensitive.</p></div></div><div class="spec val" id="val-searchaddpl"><a href="#val-searchaddpl" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>searchaddpl : <a href="../Client/index.html#type-t">Client.t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-search_tags">search_tags</a><span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> <a href="../Protocol/index.html#type-response">Protocol.response</a></code></div><div class="doc"><p>Search for any song that contains WHAT in tag TYPE and adds them to the
playlist named NAME. If a playlist by that name doesn't exist it is
created. Parameters have the same meaning as for find, except that search is
not case sensitive.</p></div></div><div class="spec type" id="type-song_count"><a href="#type-song_count" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>song_count</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-song_count.songs" class="anchored"><td class="def field"><a href="#type-song_count.songs" class="anchor"></a><code>songs : int;</code></td></tr><tr id="type-song_count.playtime" class="anchored"><td class="def field"><a href="#type-song_count.playtime" class="anchor"></a><code>playtime : float;</code></td></tr><tr id="type-song_count.misc" class="anchored"><td class="def field"><a href="#type-song_count.misc" class="anchor"></a><code>misc : string;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p>basic type for the response of the count command.</p></div></div><div class="spec val" id="val-count"><a href="#val-count" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>count : <a href="../Client/index.html#type-t">Client.t</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-tags">tags</a><span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> ?&#8288;group:<a href="index.html#type-tags">tags</a> <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-song_count">song_count</a> list, string) Stdlib.result</code></div><div class="doc"><p>Get a count of songs with filters. For examples: count group artist will
return for each artist the number of sons, the total playtime and the
name of the artist in misc.
Counts the number of songs and their total playtime in the db matching TAG
exactly. The group keyword may be used to group the results by a tag. The
following prints per-artist counts:
count group artist
count genre metal date 2016 group artist</p></div></div><div class="spec val" id="val-list"><a href="#val-list" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>list : <a href="../Client/index.html#type-t">Client.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-tags">tags</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-tags">tags</a><span class="keyword"> * </span>string) list <span class="keyword">&#8209;&gt;</span> (string list, string) Stdlib.result</code></div><div class="doc"><p>Get a list based on some filer. For example &quot;list album artist &quot;Elvis Presley&quot;&quot;
will return a list of the album names of Elvis Presley that exists in the
music database.</p></div></div><div class="spec val" id="val-update"><a href="#val-update" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>update : <a href="../Client/index.html#type-t">Client.t</a> <span class="keyword">&#8209;&gt;</span> string option <span class="keyword">&#8209;&gt;</span> <a href="../Protocol/index.html#type-response">Protocol.response</a></code></div><div class="doc"><p>Updates the music database: find new files, remove deleted files, update
modified files. URI is a particular directory or song/file to update. If
you do not specify it, everything is updated.
Prints &quot;updating_db: JOBID&quot; where JOBID is a positive number identifying
the update job. You can read the current job id in the status response.</p></div></div><div class="spec val" id="val-rescan"><a href="#val-rescan" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>rescan : <a href="../Client/index.html#type-t">Client.t</a> <span class="keyword">&#8209;&gt;</span> string option <span class="keyword">&#8209;&gt;</span> <a href="../Protocol/index.html#type-response">Protocol.response</a></code></div><div class="doc"><p>Same as update, but also rescans unmodified files.</p></div></div></body></html>