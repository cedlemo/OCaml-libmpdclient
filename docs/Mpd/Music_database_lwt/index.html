<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Music_database_lwt (libmpdclient.Mpd.Music_database_lwt)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">libmpdclient</a> &#x00BB; <a href="../index.html">Mpd</a> &#x00BB; Music_database_lwt</nav><header class="odoc-preamble"><h1>Module <code><span>Mpd.Music_database_lwt</span></code></h1><p>Music_database module with Lwt: regroups data base related commands.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : 
  <span><a href="../Client_lwt/index.html#type-t">Client_lwt.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Tags/index.html#type-search_tags">Tags.search_tags</a> * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?sort:<a href="../Tags/index.html#type-t">Tags.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?window:<span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="../Song/index.html#type-t">Song.t</a> list</span>, <a href="../Protocol/index.html#type-ack_error">Protocol.ack_error</a> * int * string * string)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Find songs in the db that match exactly the a list of pairs (tag, exact_pattern). The exact_pattern is a string and the tah can be any tag supported by MPD, or one of the special parameters:</p><ul><li>any checks all tag values</li><li>file checks the full path (relative to the music directory)</li><li>base restricts the search to songs in the given directory (also relative to the music directory)</li><li>modified-since compares the file's time stamp with the given value (ISO 8601 or UNIX time stamp)</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-findadd"><a href="#val-findadd" class="anchor"></a><code><span><span class="keyword">val</span> findadd : 
  <span><a href="../Client_lwt/index.html#type-t">Client_lwt.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Tags/index.html#type-search_tags">Tags.search_tags</a> * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Protocol/index.html#type-response">Protocol.response</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-search"><a href="#val-search" class="anchor"></a><code><span><span class="keyword">val</span> search : 
  <span><a href="../Client_lwt/index.html#type-t">Client_lwt.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Tags/index.html#type-search_tags">Tags.search_tags</a> * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?sort:<a href="../Tags/index.html#type-t">Tags.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?window:<span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="../Song/index.html#type-t">Song.t</a> list</span>, <a href="../Protocol/index.html#type-ack_error">Protocol.ack_error</a> * int * string * string)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Search for any song that contains WHAT. Parameters have the same meaning as for find, except that search is not case sensitive.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-searchadd"><a href="#val-searchadd" class="anchor"></a><code><span><span class="keyword">val</span> searchadd : 
  <span><a href="../Client_lwt/index.html#type-t">Client_lwt.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Tags/index.html#type-search_tags">Tags.search_tags</a> * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Protocol/index.html#type-response">Protocol.response</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Search for any song that contains WHAT in tag TYPE and adds them to current playlist. Parameters have the same meaning as for findadd, except that search is not case sensitive.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-searchaddpl"><a href="#val-searchaddpl" class="anchor"></a><code><span><span class="keyword">val</span> searchaddpl : 
  <span><a href="../Client_lwt/index.html#type-t">Client_lwt.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Tags/index.html#type-search_tags">Tags.search_tags</a> * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Protocol/index.html#type-response">Protocol.response</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Search for any song that contains WHAT in tag TYPE and adds them to the playlist named NAME. If a playlist by that name doesn't exist it is created. Parameters have the same meaning as for find, except that search is not case sensitive.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-song_count"><a href="#type-song_count" class="anchor"></a><code><span><span class="keyword">type</span> song_count</span><span> = </span><span>{</span></code><ol><li id="type-song_count.songs" class="def record field anchored"><a href="#type-song_count.songs" class="anchor"></a><code><span>songs : int;</span></code></li><li id="type-song_count.playtime" class="def record field anchored"><a href="#type-song_count.playtime" class="anchor"></a><code><span>playtime : float;</span></code></li><li id="type-song_count.misc" class="def record field anchored"><a href="#type-song_count.misc" class="anchor"></a><code><span>misc : string;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>basic type for the response of the count command.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-count"><a href="#val-count" class="anchor"></a><code><span><span class="keyword">val</span> count : 
  <span><a href="../Client_lwt/index.html#type-t">Client_lwt.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Tags/index.html#type-t">Tags.t</a> * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?group:<a href="../Tags/index.html#type-t">Tags.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="#type-song_count">song_count</a> list</span>, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Get a count of songs with filters. For examples: count group artist will return for each artist the number of sons, the total playtime and the name of the artist in misc. Counts the number of songs and their total playtime in the db matching TAG exactly. The group keyword may be used to group the results by a tag. The following prints per-artist counts: count group artist count genre metal date 2016 group artist</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : 
  <span><a href="../Client_lwt/index.html#type-t">Client_lwt.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tags/index.html#type-t">Tags.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Tags/index.html#type-t">Tags.t</a> * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span>string list</span>, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Get a list based on some filer. For example &quot;list album artist &quot;Elvis Presley&quot;&quot; will return a list of the album names of Elvis Presley that exists in the music database.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : <span><a href="../Client_lwt/index.html#type-t">Client_lwt.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Protocol/index.html#type-response">Protocol.response</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Update the music database: find new files, remove deleted files, update modified files. URI is a particular directory or song/file to update. If you do not specify it, everything is updated. Prints &quot;updating_db: JOBID&quot; where JOBID is a positive number identifying the update job. You can read the current job id in the status response.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rescan"><a href="#val-rescan" class="anchor"></a><code><span><span class="keyword">val</span> rescan : <span><a href="../Client_lwt/index.html#type-t">Client_lwt.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Protocol/index.html#type-response">Protocol.response</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Same as update, but also rescans unmodified files.</p></div></div></div></body></html>